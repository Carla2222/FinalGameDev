BasicGame = function (game) {
};

BasicGame.prototype = {
    init: function () {
    },
	preload:function(){
		game.load.image('bg','img/sky.png');
		game.load.image('play','img/play.jpg');
		game.load.image('fire','img/fire.png');
		game.load.image('platform','img/platform.png');
		game.load.spritesheet('player','img/player.png',125,138);
    	game.load.spritesheet('tsato', 'img/tsato.png',50,50);
    	game.load.spritesheet('ai', 'img/ai.png',121,138);
    	game.load.spritesheet('ai2', 'img/ai.png',125,138);
    game.load.image('gameover', 'img/overgame.jpg');
    game.load.image('line', 'img/line.png');

    // ito yung mga music mag download kna lng ng music at palitan mu yung anjan
    game.load.audio('bgMusic', 'audio/clapping.mp3');
    game.load.audio('yay', 'audio/clapping.mp3');
    game.load.audio('boo', 'audio/clapping.mp3');

	},

	create:function (){
		game.physics.startSystem(Phaser.Physics.ARCADE);
        game.scale.scaleMode = Phaser.ScaleManager.EXACT_FIT;
        game.scale.forcePortrait = false;
        game.scale.forceLandscape = true;
        game.scale.pageAlignHorizontally = true;
        game.scale.pageAlignVertically = true;;
        game.scale.setScreenSize = true;
        keyboard = game.input.keyboard.createCursorKeys();
		game.add.image(0,0,'bg');
		platform = game.add.sprite(0,0,'platform');
		platform.scale.y=2;

		line = game.add.sprite(550,200,'line');
    game.physics.arcade.enable(line);
    line.body.immovable=true;
    game.physics.arcade.enable(platform);
    platform.body.immovable=true;

		ai = game.add.sprite(100,50,'ai');
		// ai2 = game.add.sprite(150,200,'ai2');
		player = game.add.sprite(700,200,'player');
		// player.scale.x=2;
    btnfire = game.add.button(680,400,'fire',tsatoGame.pushRight);

		player.animations.add('player',[3,2,1,0,4,3],24,false);
		ai.animations.add('ai',[2,0,1],9,true);

    game.physics.arcade.enable(player);
    player.body.collideWorldBounds = true;
    game.physics.arcade.enable(ai);
    ai.body.collideWorldBounds = true;
    ai.body.velocity.y=-450;
    ai.body.bounce.y=1;

		    tsatoGame.createTsatos(4572);
		    tsato = game.add.group();
		    tsato.enableBody = true;
		    tsatoGame.createTsato1s(3172);
		    tsato1 = game.add.group();
		    tsato1.enableBody = true;

    life = game.add.text(50,10,'Life: 3',{fill:"black"});
    score = game.add.text(650,10,'Score: 0',{fill:"black"});
    bestScore = game.add.text(600,40,'High Score: '+tsatoGame.retrieveBest(),{fill:"black"});
    buttonPlay = game.add.button(0,0,'play',tsatoGame.play);


		    // dito na magplaplay yung bg music pero yung iba sa player.kill() nakalagay
		    yaymusic = game.add.audio('yay');
		    boomusic = game.add.audio('boo');
		    bgmusic = game.add.audio('bgMusic');
		    bgmusic.play();
		    tsatoGame.loopAudio(4000);
	},

	update:function (){
		game.physics.arcade.collide(player,tsato);
		game.physics.arcade.overlap(player,line, tsatoGame.balikPosition);
    game.physics.arcade.overlap(ai2,tsato,tsatoGame.killTsato2);

    game.physics.arcade.overlap(platform,tsato,tsatoGame.scoreTsato);
    game.physics.arcade.overlap(ai,tsato,tsatoGame.killTsato);

    game.physics.arcade.overlap(ai2,tsato1,tsatoGame.killTsato12);

    game.physics.arcade.overlap(platform,tsato1,tsatoGame.scoreTsato1);
    game.physics.arcade.overlap(ai,tsato1,tsatoGame.killTsato1);

		    if(keyboard.right.isDown){
		    player1.body.velocity.x=270
		}
		else{
			ai.animations.play('ai')
		}
	}
};
game.state.add('Play', BasicGame, true);